{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#home","title":"Home","text":""},{"location":"#about","title":"About","text":"<p>Helm Charts and deployment documentation for the American Archive of Public Broadcasting (AAPB)</p>"},{"location":"#links","title":"Links","text":"<ul> <li>Production site: americanarchive.org</li> <li>Development site: aapb.dev.wgbh-mla.org</li> <li>User documentation: TODO</li> <li>Source code: github.com/WGBH-MLA/dream-aapb</li> <li>Helm chart: wgbh-mla.github.io/aapb-deploy</li> </ul>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li>Quickstart for installation instructions</li> <li>Tutorials for additional how-tos and setup instructions</li> <li>Guides for deployment and maintenance operations</li> <li>Reference for technical information</li> <li>About for project information and architecture overview</li> </ul>"},{"location":"#credits","title":"Credits","text":"<p>Developed by the GBH Archives at WGBH Boston</p>"},{"location":"about/","title":"About","text":""},{"location":"about/#about","title":"About","text":"<p>This section provides information about the AAPB deployment, architecture, and the organizations involved in its development and maintenance, as well as links to additional resources and documentation.</p>"},{"location":"about/#architecture","title":"Architecture","text":"<p>See the Architecture Overview for a high-level description of the AAPB system architecture.</p>"},{"location":"about/#organizations","title":"Organizations","text":""},{"location":"about/#aapb","title":"AAPB","text":"<p>See the AAPB website for more information about the AAPB project.</p>"},{"location":"about/#gbh","title":"GBH","text":"<p>See the GBH website for more information about GBH and its initiatives.</p>"},{"location":"about/#media-library-and-archives","title":"Media Library and Archives","text":"<p>The AAPB application is developed and maintained by the Media Library and Archives department at GBH in Boston, MA.</p> <p>See the Archives website for more information about the Media Library and Archives department.</p>"},{"location":"about/architecture/","title":"Architecture","text":""},{"location":"about/architecture/#architecture","title":"Architecture","text":"<p>TODO</p>"},{"location":"guides/","title":"Guides","text":""},{"location":"guides/#guides","title":"Guides","text":"<p>Management, maintenance and deployment guides for AAPB</p> <ul> <li>Helm chart updating and publishing</li> <li>Elasticsearch index management</li> <li>ArgoCD deployment parameters</li> </ul>"},{"location":"guides/argo/","title":"Argo CD","text":""},{"location":"guides/argo/#argo-cd","title":"Argo CD","text":"<p>Deployments are managed via Argo CD, a declarative, GitOps continuous delivery tool for Kubernetes.</p>"},{"location":"guides/argo/#links","title":"Links","text":"<ul> <li>cd.dev.wgbh-mla.org/ - Dev cluster</li> <li>cd.wgbh-mla.org/ - Prod cluster (not yet set up)</li> </ul> Admin Access <p>Access to the Argo CD web interface is restricted. Contact the WGBH Archives team for access.</p> <pre><code># Get the initial admin password\nkubectl -n argo-cd get secret argocd-initial-admin-secret -o json | jq -r .data.password | base64 -d\n</code></pre>"},{"location":"guides/argo/#deploying-a-new-image","title":"Deploying a new image","text":""},{"location":"guides/argo/#case-1-restart-deployment","title":"Case 1: Restart deployment","text":"<p>If the new image has the same tag as the previous image (e.g. <code>latest</code>), restart the deployment to pull the new image.</p>"},{"location":"guides/argo/#case-2-update-image-tag","title":"Case 2: Update image tag","text":"<p>If the new image has a different tag, update the image tag value in the ArgoCD web interface.</p>"},{"location":"guides/argo/#case-3-update-image-repository","title":"Case 3: Update image repository","text":"<p>If the new image is in a different repository, update the image repository parameter in the ArgoCD web interface.</p>"},{"location":"guides/argo/#updating-parameters","title":"Updating Parameters","text":"<p>In addition to the image tag and repository, other parameters can be modified under the Parameters tab in the ArgoCD web interface. These parameters correspond to the values in the Helm chart's <code>values.yaml</code> file.</p> <p></p>"},{"location":"guides/elastic/","title":"Elasticsearch","text":""},{"location":"guides/elastic/#elasticsearch","title":"Elasticsearch","text":""},{"location":"guides/elastic/#introduction","title":"Introduction","text":""},{"location":"guides/elastic/#indexes","title":"Indexes","text":""},{"location":"guides/elastic/#reindexing","title":"Reindexing","text":""},{"location":"guides/helm/","title":"Helm","text":""},{"location":"guides/helm/#helm","title":"Helm","text":""},{"location":"guides/helm/#update-helm-chart","title":"Update Helm Chart","text":""},{"location":"guides/helm/#publish-helm-chart","title":"Publish Helm Chart","text":""},{"location":"guides/helm/#update-deployment-version","title":"Update deployment version","text":""},{"location":"ref/","title":"Reference","text":""},{"location":"ref/#reference","title":"Reference","text":"<p>TODO</p>"},{"location":"tutorials/","title":"Tutorials","text":""},{"location":"tutorials/#tutorials","title":"Tutorials","text":"<p>This section contains tutorials for using and administering the AAPB application.</p>"},{"location":"tutorials/#quickstart","title":"Quickstart","text":"<p>See Quickstart tutorial for installation instructions</p>"},{"location":"tutorials/#upgrading","title":"Upgrading","text":"<p>See Upgrading tutorial for instructions on upgrading the AAPB application.</p>"},{"location":"tutorials/helm/","title":"Helm chart deployment","text":""},{"location":"tutorials/helm/#helm-chart-deployment","title":"Helm chart deployment","text":"<p>Setup</p> <p>If you haven't set up a production environment, follow the steps in Quickstart first.</p>"},{"location":"tutorials/helm/#helm","title":"Helm","text":"<p>The recommended way to deploy AAPB is using the Helm Chart.</p>"},{"location":"tutorials/helm/#install","title":"Install","text":"<p>Add the Helm repository: </p><pre><code>helm repo add aapb https://wgbh-mla.github.io/aapb-deploy\n</code></pre><p></p> <p>Update the charts: </p><pre><code>helm repo update\n</code></pre><p></p> <p>Customize the values in <code>values.yaml</code> to your needs. You can also use <code>--set</code> to override values on the command line. </p><pre><code>global:\n  backend:\n    image:\n      tag: latest\n</code></pre><p></p> <p>Install the Helm chart: </p><pre><code>helm install my-aapb aapb/aapb\n</code></pre><p></p>"},{"location":"tutorials/helm/#upgrade","title":"Upgrade","text":"<pre><code>helm upgrade my-aapb aapb/aapb\n</code></pre>"},{"location":"tutorials/quickstart/","title":"Quickstart","text":""},{"location":"tutorials/quickstart/#quickstart","title":"Quickstart","text":""},{"location":"tutorials/quickstart/#prerequisites","title":"Prerequisites","text":"<p>These instructions assume you have a working Kubernetes cluster and <code>kubectl</code>, configured to connect to your cluster.</p> <p>There are two main ways to deploy the AAPB application: 1. Using Argo CD (recommended) 2. Using Helm</p>"},{"location":"tutorials/quickstart/#argo-cd-recommended","title":"Argo CD (Recommended)","text":"<ol> <li>Login to the Argo CD web interface: cd.dev.wgbh-mla.org</li> <li>Create a new application in Argo CD with the following settings:</li> <li>Application Name: <code>aapb</code></li> <li>Project: <code>aapb</code></li> <li>Sync Policy: Automatic</li> <li>Repo URL: <code>https://wgbh-mla.github.io/aapb-deploy/</code><ul> <li>Make sure to select <code>Helm</code> as the type, not <code>Git</code></li> </ul> </li> <li>Target Revision: Use the latest helm chart version</li> <li>Chart: <code>aapb</code></li> </ol> <ol> <li>Set other options for your deployment like Cluster and Namespace</li> </ol>"},{"location":"tutorials/quickstart/#helm","title":"Helm","text":""},{"location":"tutorials/quickstart/#add-helm-repository","title":"Add Helm Repository","text":"<p>Add the Helm repository for the AAPB application: </p><pre><code>helm repo add aapb https://wgbh-mla.github.io/aapb-deploy/\nhelm repo update\n</code></pre><p></p> Namespaces"},{"location":"tutorials/quickstart/#create-a-namespace","title":"Create a namespace","text":"<p>Create a new namespace, in this case: <code>aapb</code>:</p> <pre><code>kubectl create namespace aapb\n</code></pre> <p>Set the current context to the new namespace: </p><pre><code>kubectl config set-context --current --namespace=aapb\n\n# Verify the current context\nkubectl config view --minify | grep namespace:\n</code></pre><p></p>"},{"location":"tutorials/quickstart/#install-the-application","title":"Install the Application","text":"<p>Install the AAPB application using Helm: </p><pre><code>helm install aapb aapb/aapb -n aapb\n</code></pre><p></p>"},{"location":"tutorials/upgrade/","title":"Upgrading AAPB","text":""},{"location":"tutorials/upgrade/#upgrading-aapb","title":"Upgrading AAPB","text":"<p>This guide provides instructions for upgrading the AAPB application deployed via Helm.</p>"},{"location":"tutorials/upgrade/#tldr","title":"TLDR","text":"<p>After the automated build process is complete, update the image in the kubernetes deployment.</p>"},{"location":"tutorials/upgrade/#case-1-using-argocd","title":"Case 1: Using ArgoCD","text":"<ol> <li>Log in to the ArgoCD web interface</li> <li>Navigate to the AAPB application</li> <li>In the <code>aapb</code> deployment resource sub-menu, click the \"Refresh\" option</li> </ol>"}]}